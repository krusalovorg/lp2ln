# P2P Network Simulation Daemon

Демон для симуляции P2P сети с несколькими сигнальными серверами и пирами.

## Описание

Simulation демон использует P2P библиотеку для создания локальной симуляции сети:
- Создает несколько сигнальных серверов
- Создает несколько пиров
- Запускает их все одновременно для тестирования взаимодействия

## Установка

```bash
cd p2p-simulation
cargo build --release
```

## Запуск

### Базовый запуск (1 сервер, 3 пира)
```bash
cargo run --release
```

### С настройкой через переменные окружения
```bash
NUM_SIGNAL_SERVERS=2 NUM_PEERS=5 cargo run --release
```

Или скомпилированный бинарник:

```bash
NUM_SIGNAL_SERVERS=2 NUM_PEERS=5 ./target/release/p2p-simulation
```

## Конфигурация

Simulation использует тот же файл `config.toml`, что и основная библиотека. Убедитесь, что файл находится в корне проекта.

### Переменные окружения

- `NUM_SIGNAL_SERVERS` - количество сигнальных серверов (по умолчанию: 1)
- `NUM_PEERS` - количество пиров (по умолчанию: 3)

## Структура

- `src/main.rs` - главный файл демона с логикой симуляции
- `NetworkSimulation` - структура для управления симуляцией

## Как это работает

1. Simulation создает указанное количество сигнальных серверов
2. Создает указанное количество пиров
3. Каждый узел получает свою отдельную базу данных в `./simulation_storage/`
4. Все узлы запускаются параллельно в отдельных задачах
5. Симуляция работает до завершения всех задач

## Использование

Simulation демон полезен для:
- Тестирования взаимодействия между узлами
- Отладки протоколов P2P
- Демонстрации работы сети
- Разработки и тестирования новых функций

## Зависимости

Simulation использует библиотеку `P2P-Server` как зависимость.

